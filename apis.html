<html>

<head>
<title>AppVet APIs</title>
<link rel="stylesheet" href="stylesheets/appvet.css">
</head>

<body>

	<h1>APIs</h1>

	<ul>
		<li class="big"><a href="#clientapi">AppVet Client API</a></li>
		<li class="big"><a href="#toolapi">Tool API</a></li>

	</ul>
	<hr>
	<h2 id="clientapi">Client API</h2>
	
	The AppVet client API is intended to for use by third-party clients including app stores, continuous integration environments, etc. 

	<h3 id="AUTHENTICATE">AUTHENTICATE</h3>

	The
	<code>AUTHENTICATE</code>
	service accepts a username and password for authenticating a client
	with AppVet and returns an AppVet session ID. This session ID may then
	be used by the client for further interaction with AppVet until the
	session expires.
	
	<ul>
	
	<li>URL</li>
	<br><br>
	<code>/appvet/AppVetServlet</code>
	<br><br>
	
	<li>Method</li>
	<br><br>
	<code>GET</code>
	<br><br>
	
    <li>HTTP Headers</li>
	<br><br>
	HTTP header <code>Authorization</code> must be set to the base64 encoding of the string <code>[username]:[password]</code>.  <b>Example</b>: <code>Authorization</code> for user <code>joe</code> with password <code>mYpAssWord</code> (i.e., <code>joe:mYpAssWord</code>) will have a base64 value of <code>c3RldmVxOmFzZGY=</code>.
	<br><br>

	<li>URL Parameters</li>
	<br><br>
	N/A
	<br><br>
	
	<li>Form Parameters</li>
	<br><br>
	N/A
	<br><br>
	
	<li>Success Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>200 OK</code>
		<li>Payload: <code>[session_id]</code></li>
		</ul>
	<br><br>
	
	<li>Error Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>401 UNAUTHORIZED</code>
		<li>Payload: <code>[error_message]</code></li>
		</ul>
	<br><br>
	
	</ul>
	
	<h3 id="SUBMIT_APP">SUBMIT_APP</h3>

		The
	<code>SUBMIT_APP</code>
	service submits an Android or iOS app to AppVet.
	
	<ul>
	
	<li>URL</li>
	<br><br>
	<code>/appvet/AppVetServlet</code>
	<br><br>
	
	<li>Method</li>
	<br><br>
	<code>PUT</code>
	<br><br>
	
    <li>HTTP Headers</li>
	<br><br>
    N/A
  	<br><br>
  	
  	<li>URL Parameters</li>
	<br><br>
	N/A
	<br><br>

	<li>Form Parameters</li>
	<br><br>
		<ul>
		<li><code>command=SUBMIT_APP</code></li>
		<li><code>sessionid=[session_id]</code></li>
		<li><code>fileupload=[file]</code></li>
		</ul>
	<br><br>
	
	<li>Success Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>202 ACCEPTED</code></li>
		<li>Payload: <code>[app_id]</code></li>
		</ul>
	<br><br>
	
	<li>Error Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>400 BAD REQUEST</code>
		<li>Payload: [error_message]</li>
		</ul>
	<br><br>
	
	</ul>


	<h3 id="GET_APP_STATUS">GET_APP_STATUS</h3>

	The
	<code>GET_APP_STATUS</code>
	service retrieves the current status or risk assessment of an app.
	
		<ul>
	
	<li>URL</li>
	<br><br>
	<code>/appvet/AppVetServlet</code>
	<br><br>
	
	<li>Method</li>
	<br><br>
	<code>GET</code>
	<br><br>
	
    <li>HTTP Headers</li>
	<br><br>
	N/A
	<br><br>

	<li>URL Parameters</li>
	<br><br>
		<ul>
		<li><code>command=GET_APP_STATUS</code></li>
		<li><code>appid=[app_id]</code></li>
		<li><code>sessionid=[session_id]</code></li>
		</ul>
	<br><br>
	
	<li>Data Parameters</li>
	<br><br>
	N/A
	<br><br>
	
	<li>Success Response</li>
	<br><br>

		<ul>
		<li>HTTP Code: <code>200 OK</code>
		<li>Payload: <code>[app_status]</code></li>
		</ul>
	<br><br>
		A returned <code>app_status</code> will have a value of: 
		<br><br> 
		<ul>
		<li><code>REGISTERING</code>: The app is currently being registered.</li>
		<li><code>PENDING</code>: The app is in the queue waiting to be processed.</li>
		<li><code>PROCESSING</code>: The app is being analyzed.</li>
		<li><code>ERROR</code>: A tool has failed to analyze the app.</li>
		<li><code>LOW</code>: All tools have assessed the app as low risk.</li>
		<li><code>MODERATE</code>: At least one tool has assessed the app as moderate risk but no tool assessed the app as high risk.</li>
		<li><code>HIGH</code>: At least one tool has assessed the app as high risk.</li>
		<li><code>NA</code>: No tools were available to process the app.</li>
		</ul>
	<br><br>
	<li>Error Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>401 UNAUTHORIZED</code>
		<li>Payload: <code>[error_message]</code></li>
		</ul>
	<br><br>
	
	</ul>
	
	<h3 id="GET_APP_TOOLS_STATUS">GET_APP_TOOLS_STATUS</h3>
	
	
		The
	<code>GET_APP_TOOLS_STATUS</code>
	service retrieves the current status or risk assessment of a tool for an app.
	
		<ul>
	
	<li>URL</li>
	<br><br>
	<code>/appvet/AppVetServlet</code>
	<br><br>
	
	<li>Method</li>
	<br><br>
	<code>GET</code>
	<br><br>
	
    <li>HTTP Headers</li>
	<br><br>
	N/A
	<br><br>

	<li>URL Parameters</li>
	<br><br>
		<ul>
		<li><code>command=GET_APP_TOOLS_STATUS</code></li>
		<li><code>appid=[app_id]</code></li>
		<li><code>sessionid=[session_id]</code></li>
		</ul>
	<br><br>
	
	<li>Data Parameters</li>
	<br><br>
	N/A
	<br><br>
	
	<li>Success Response</li>
	<br><br>

		<ul>
		<li>HTTP Code: <code>200 OK</code>
		<li>Payload: <code>[app_tools_status]</code></li>
		</ul>
	<br><br>
		A returned <code>app_tools_status</code> will be a string that defines the status 
		for each tool. The format of <code>app_tools_status</code> will be of the form: <code>app_tools_status = [tool1=tool1_status,tool2=tool2_status,...]</code>
		<br><br> 
		where <code>tool<i>n</i>_status</code> will be one of:
		<br><br>
		<ul>
		<li><code>SUBMITTED</code>: The app was submitted to the tool but no result has been generated.</li>
		<li><code>ERROR</code>: The tool has failed to analyze the app.</li>
		<li><code>LOW</code>: The tool has assessed the app as low risk.</li>
		<li><code>MODERATE</code>: The tool has assessed the app as moderate risk.</li>
		<li><code>HIGH</code>: The tool has assessed the app as high risk.</li>
		<li><code>NA</code>: The tool was not available to process the app.</li>
		</ul>
	<br><br>
	<li>Error Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>401 UNAUTHORIZED</code>
		<li>Payload: <code>[error_message]</code></li>
		</ul>
	<br><br>
	
	</ul>
	
	<h3 id="DOWNLOAD_REPORTS">DOWNLOAD_REPORTS</h3>
	
	
		The
	<code>DOWNLOAD_REPORTS</code>
	service retrieves the available reports for an app in a single zip file.
	
		<ul>
	
	<li>URL</li>
	<br><br>
	<code>/appvet/AppVetServlet</code>
	<br><br>
	
	<li>Method</li>
	<br><br>
	<code>GET</code>
	<br><br>
	
    <li>HTTP Headers</li>
	<br><br>
	N/A
	<br><br>

	<li>URL Parameters</li>
	<br><br>
		<ul>
		<li><code>command=DOWNLOAD_REPORTS</code></li>
		<li><code>appid=[app_id]</code></li>
		<li><code>sessionid=[session_id]</code></li>
		</ul>
	<br><br>
	
	<li>Data Parameters</li>
	<br><br>
	N/A
	<br><br>
	
	<li>Success Response</li>
	<br><br>

		<ul>
		<li>HTTP Code: <code>200 OK</code>
		<li>Payload: <code>[app_reports]</code></li>
		</ul>
	<br><br>
		A returned <code>app_reports</code> will be a binary zip file containing all available reports for the app.
	<br><br>
	<li>Error Response</li>
	<br><br>
		<ul>
		<li>HTTP Code: <code>401 UNAUTHORIZED</code>
		<li>Payload: <code>[error_message]</code></li>
		</ul>
	<br><br>
	
	</ul>
		
	<h2 id="toolapi">Tool API</h2>
	
	The AppVet tool API is intended for use by third-party tools to submit analysis reports and risk assessments back to AppVet.
	<br><br>
	TBD
	<br><br>

</body>

</html>