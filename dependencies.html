<html>
<title>AppVet Dependencies</title>
      <link rel="stylesheet" href="stylesheets/appvet.css">

<head>
</head>

<body>
	<h1>Dependencies</h1>

AppVet is dependent on the following platforms and tools:
<ul>
<li>Oracle Java JDK 8</li>
<li>Oracle MySQL 5</li>
<li>Apache Tomcat 8</li>
<li>Android Apktool 2.0</li>
</ul>

Note that AppVet dependencies require Oracle Java JDK to be installed first.

<h2>Oracle JDK</h2>
<h3>Installation</h3>

AppVet requires Oracle Java JDK 8 to be installed. However, CentOS comes preinstalled with OpenJDK Java packages which must first be uninstalled and removed. To view a list of preinstalled OpenJDK packages of Java, run:


	# rpm -aq | grep -i java


To uninstall and remove OpenJDK Java packages, open a console and run (using sudo) rpm -e for each OpenJDK Java. For example:


	# rpm -e <package_name>


Note that other applications (e.g., libreoffice) might be dependent on OpenJDK and should be uninstalled (e.g., using yum remove libraoffice*) prior to uninstalling OpenJDK. Next, download Oracle Java JDK 8 (jdk-8u60-linux-x64.rpm) from:


http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html


To install the Oracle JDK .rpm file, open a terminal and run (using sudo):


	# rpm -ivh /path/to/jdk-8u60-linux-x64.rpm


This will install Oracle JDK in /usr/java/jdk1.8.0_60. To ensure proper installation, open a console and run:


	# java -version


For Oracle JDK 8, the correct version should be 1.8.0_60.

1.2.1.2. Environment Variables

To ensure proper operation of AppVet, the $JAVA_HOME and $JRE_HOME (Java Runtime Environment) environment variables must be globally defined. Edit (using sudo) /etc/profile by adding the following at the end of the file:


	#Global Environment Variables
	JAVA_HOME=/usr/java/jdk1.8.0_60
	JRE_HOME=$JAVA_HOME/jre
	PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$JRE_HOME/bin
	export JAVA_HOME
	export JRE_HOME
	export PATH


Then reload /etc/profile by running:


	# source /etc/profile


in all open terminals. To verify that $JAVA_HOME and $JRE_HOME have been added to your $PATH variable, run:


	# printenv PATH


Next, to allow $JAVA_HOME and $JRE_HOME to be accessed when using sudo, open a terminal and run:


	# sudo visudo


From visudo, add the following line:


	Defaults env_keep += "JAVA_HOME JRE_HOME"


This will force sudo to preserve and use the $JAVA_HOME and $JRE_HOME environment variables as defined in /etc/profile (since sudo typically ignores these environment variables). To verify that $JAVA_HOME and $JRE_HOME are now accessible to sudo, run:



	# sudo printenv JAVA_HOME
	# sudo printenv JRE_HOME


1.2.2.	MySQL

AppVet requires MySQL 5 to be installed. MySQL is used to store AppVet-related data including user accounts, app statuses, and session data. To install MySQL 5, open a browser and go to:

	http://dev.mysql.com/downloads/mysql/

Next, download the MySQL Red Hat Enterprise Linux 7 / Oracle Linux 7 RPM (mysql-community-release-el7-5.noarch.rpm). To install MySQL Yum Repository, run:


	# sudo yum localinstall mysql-community-release-el7-5.noarch.rpm


To verify MySQL Yum Repository installation, run:


	# sudo yum repolist enabled | grep "mysql.*-community.*"


Next, install MySQL by running:


	# sudo yum install mysql-community-server


To set the root password for MySQL, open a terminal and run:


	# sudo mysql_secure_installation


For this installation, we set the root MySQL password to appvet123. For convenience, add the following aliases to your .bashrc file for starting and stopping the MySQL service and for logging into the MySQL system:


	alias mstart='sudo service mysqld start'
	alias mstop='sudo service mysqld stop'
	alias mysql='/usr/bin/mysql -u root -p'


Then reload your .bashrc file by running:


	# source ~/.bashrc


in all open terminals. To ensure proper installation of MySQL, run:


	# mysql


If MySQL does not start, add the path to the /bin directory of your MySQL installation to your $PATH environment variable.

1.2.3.	Apache Tomcat

1.2.3.1. Installation

AppVet requires Apache Tomcat 8 to be installed. Tomcat is used to host AppVet as a web-based application and service. For this installation, Tomcat is installed into the $HOME directory. To install Apache Tomcat 8, open a browser and go to:


		http://tomcat.apache.org/download-80.cgi


Next, download the Apache Tomcat 8.0.26 Binary Distribution Core tar.gz file and move the downloaded file from your $HOME/Downloads to your $HOME directory. Then, open a terminal to extract the compressed tar file into $HOME:


	# tar xvzf apache-tomat-8.0.26.tar.gz


To ensure proper installation of Tomcat, run:


	# $HOME/apache-tomcat-8.0.26/bin/startup.sh


Then, open a web browser and go to:


	http://127.0.0.1:8080 or http://localhost:8080


If the Apache Tomcat 8.0.26 web page is displayed, then Tomcat was installed correctly.


To shut down Tomcat, run:


	# $HOME/apache-tomcat-8.0.26/bin/shutdown.sh


For convenience, add the following aliases to your .bashrc file:


	alias tstart='source /etc/profile;$HOME/apache-tomcat-8.0.26/bin/startup.sh'
	alias tstop='$HOME/apache-tomcat-8.0.26/bin/shutdown.sh'


Note that the command source /etc/profile ensures that when running Tomcat using sudo that Tomcat will have access to required AppVet environment variables defined in /etc/profile. Next, reload .bashrc by running:


	# source ~/.bashrc

1.2.3.2. Environment Variables

To ensure proper operation of AppVet, Tomcat's $CATALINA_HOME and $CATALINA_BASE environment variables must be globally defined. Edit (using sudo) /etc/profile by adding the following (in bold):


	#Global Environment Variables
	JAVA_HOME=/usr/lib/jvm/java-8-oracle
	JRE_HOME=$JAVA_HOME/jre
	CATALINA_HOME=/home/jdoe/apache-tomcat-8.0.26
	CATALINA_BASE=/home/jdoe/apache-tomcat-8.0.26
	PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$JRE_HOME/bin:$CATALINA_HOME/bin:$CATALINA_BASE/bin
	export JAVA_HOME
	export JRE_HOME
	export CATALINA_HOME
	export CATALINA_BASE
	export PATH


Then reload /etc/profile by running:


	# source /etc/profile


in all open terminals. To verify that $CATALINA_HOME and $CATALINA_BASE have been added to your $PATH variable, run:


	# printenv PATH


Next, to allow $CATALINA_HOME and $CATALINA_BASE to be accessed when using sudo, open a terminal and run:


	# sudo visudo


From visudo, add $CATALINA_HOME and $CATALINA_BASE to the env_keep variable:


	Defaults env_keep += "JAVA_HOME JRE_HOME CATALINA_HOME CATALINA_BASE"


To verify that $CATALINA_HOME and $CATALINA_BASE are now accessible to sudo, run:


	# sudo printenv CATALINA_HOME
	# sudo printenv CATALINA_BASE


1.2.4.	Android Apktool

1.2.4.1. Installation

For Android app analysis, AppVet requires Android Apktool 2.0.x to be installed. The Android Apktool is used to extract metadata information from Android applications. To install Apktool, download it as a zip archive from:


	http://www.mediafire.com/download/56fhlu6wnbtfdna/apktool.zip


and unzip the apktool.zip file. Next, navigate to the extracted /apktool directory and change the permissions of the apktool and apktool.jar files as follows:

	# chmod 555 apktool
	# chmod 555 apktool.jar


Next, move both files to /usr/local/bin as follows:


	# sudo mv apktool /usr/local/bin
	# sudo mv apktool.jar /usr/local/bin


1.2.4.2. Environment Variables

To ensure proper operation of AppVet, the $APKTOOL_HOME environment variables must be globally defined. Edit (using sudo) /etc/profile by adding the following (in bold):


	#Global Environment Variables
	JAVA_HOME=/usr/lib/jvm/java-8-oracle
	JRE_HOME=$JAVA_HOME/jre
	CATALINA_HOME=/home/jdoe/apache-tomcat-8.0.26
	CATALINA_BASE=/home/jdoe/apache-tomcat-8.0.26
     APKTOOL_HOME=/usr/local/bin
	PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$JRE_HOME/bin:$CATALINA_HOME/bin:$CATALINA_BASE/bin:$APKTOOL_HOME
	export JAVA_HOME
	export JRE_HOME
	export CATALINA_HOME
	export CATALINA_BASE
	export APKTOOL_HOME
	export PATH


Then reload /etc/profile by running:


	# source /etc/profile


in all open terminals. To verify that $APKTOOL_HOME have been added to your $PATH variable, run:


	# printenv PATH


Next, to allow $APKTOOL_HOME to be accessed when using sudo, open a terminal and run:


	# sudo visudo


From visudo, add $APKTOOL_HOME to the env_keep variable:


	Defaults env_keep += "JAVA_HOME JRE_HOME CATALINA_HOME CATALINA_BASE APKTOOL_HOME"


To verify that $APKTOOL_HOME are now accessible to sudo, run:


	# sudo printenv sudo APKTOOL_HOME


To ensure proper installation of Android Apktool, run:


	# apktool




</body>

</html>